<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <title>Tactics Game</title>
    <script src='https://unpkg.com/vue'></script>
    <script src='https://code.jquery.com/jquery-3.1.1.js'></script>
    <script src='levels/level0.js'></script>
    <script src='script.js'></script>
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <main>
      
      <div id='leftpanel' class='panel'>
        
        <div id='selected-terrain' v-if='terrain'>
          <div id='terrain-info' class='ui'>
            <div class='heading'><div class='icon' :class='terrain.type'></div><span class='bold'>{{ terrain.name }}</span></div>
            <p>Movement cost: {{ terrain.cost }}</p>
          </div>
        </div>
        
        <div id='selected-unit' v-if='unit'>
          <div id='unit-info' class='ui'>
            <div class='heading'><div class='icon' :class='unit.faction'></div><span class='bold'>{{ unit.name }}</span></div>
            <p>Condition: <span :class='unit.condition'>{{ unit.condition }}</span></p>
            <p>Offense: {{ unit.offense }}</p>
            <p>Defense: {{ unit.defense }}</p>
            <p>Range: {{ unit.range }}</p>
            <p>Movement: {{ unit.moves }} / {{ unit.movement }}</p>
          </div>
          <div id='unit-combat' class='ui' v-if='hit'>
            <p class='combat-info'>Attack hit rate: {{ hit }}%</p>
          </div>
          <div id='unit-actions' class='ui' v-if="unit.faction === 'Player'">
            <p class='heading bold'>Actions</p>
            <p v-if='!attacking && !ending'>
              <button id='btn-move' v-if='!moving' :disabled='unit.moves === 0' @click='beginMove'>Move (M)</button>
              <button id='btn-unmove' v-else @click='cancelMove'>Cancel Move (M)</button>
            </p>
            <p v-if='!moving && !ending'>
              <button id='btn-attack' v-if='!attacking' :disabled='unit.attacks === 0' @click='beginAttack'>Attack (A)</button>
              <button id='btn-unattack' v-else @click='cancelAttack'>Cancel Attack (A)</button>
            </p>
            <div v-if='!moving && !attacking'>
              <p v-if='!ending'><button id='btn-end' @click='ending = true'>End Turn (E)</button></p>
              <p v-else>
                Really end turn?<br>
                <button id='btn-unend' @click='ending = false'>Cancel (E)</button>
                <button id='btn-confend' @click='endTurn'>Confirm (Return)</button>
              </p>
            </div>
          </div>
        </div>
        
      </div>
      
      <div id='map' class='panel' :style='mapImage'>
        <row v-for='row in gameData' :key='row' :row='row'></row>
      </div>
      
      <div id='rightpanel' class='panel'>
        
        <div id='target-space' v-if='space'>
          <div id='target-terrain' class='ui'>
            <div class='heading'><div class='icon' :class='space.terrain.type'></div><span class='bold'>{{ space.terrain.name }}</span></div>
            <p>Movement cost: {{ space.terrain.cost }}</p>
          </div>
          <div id='target-unit' class='ui'>
            <div class='heading'><div class='icon' :class='space.unit.faction'></div><span class='bold'>{{ space.unit.name }}</span></div>
            <p>Condition: <span :class='space.unit.condition'>{{ space.unit.condition }}</span></p>
            <p>Offense: {{ space.unit.offense }}</p>
            <p>Defense: {{ space.unit.defense }}</p>
            <p>Range: {{ space.unit.range }}</p>
            <p>Movement: {{ space.unit.moves }} / {{ space.unit.movement }}</p>
          </div>
          <div id='target-combat' class='ui' v-if='counter'>
            <p class='combat-info'>Counter hit rate: {{ counter }}%</p>
          </div>
          <div id='target-actions' class='ui'>
            <p class='heading bold'>Actions</p>
            <p>
              <button id='btn-confatk' @click='confirmAttack'>Confirm Attack (Return)</button>
            </p>
          </div>
        </div>
        
      </div>
      
      <div id='bottompanel' class='panel'></div>
      
    </main>
  </body>
</html>